<VirtualHost *:80>
    ServerName client.construction-company.com
    ServerAdmin webmaster@construction-company.com

    # Redirect HTTP to HTTPS
    RewriteEngine On
    RewriteCond %{HTTPS} off
    RewriteRule ^(.*)$ https://%{HTTP_HOST}$1 [R=301,L]
</VirtualHost>

<VirtualHost *:443>
    ServerName client.construction-company.com
    ServerAdmin webmaster@construction-company.com

    SSLEngine on
    SSLCertificateFile "C:/Apache24/conf/ssl/server.crt"
    SSLCertificateKeyFile "C:/Apache24/conf/ssl/server.key"

    # Proxy Configuration for Spring Boot Backend (Tomcat)
    ProxyRequests Off
    ProxyPreserveHost On

    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>

    # Forward /api requests to Tomcat
    ProxyPass /api https://localhost:8080/api
    ProxyPassReverse /api https://localhost:8080/api

    # Serve Static Frontend Files (if hosted on Apache)
    # DocumentRoot "C:/Apache24/htdocs/client-app"
    # <Directory "C:/Apache24/htdocs/client-app">
    #     Options Indexes FollowSymLinks
    #     AllowOverride All
    #     Require all granted
    # </Directory>

    ErrorLog "logs/client-error.log"
    CustomLog "logs/client-access.log" common
</VirtualHost>
